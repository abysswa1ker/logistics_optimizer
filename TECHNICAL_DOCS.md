# Ğ¢ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ - Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— Ğ»Ğ¾Ğ³Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾Ñ— Ğ¼ĞµÑ€ĞµĞ¶Ñ–

## ğŸ“š Ğ—Ğ¼Ñ–ÑÑ‚

1. [ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ](#Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ)
2. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ»Ğ°ÑÑ–Ğ²](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-ĞºĞ»Ğ°ÑÑ–Ğ²)
3. [ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—](#Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¸-Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—)
4. [ĞĞ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚](#Ğ¾Ğ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ-Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚)
5. [Ğ’Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ](#Ğ²Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ)
6. [Ğ Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸](#Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸)

---

## ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ

### Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
logistics_optimizer/
â”œâ”€â”€ data/                      # Ğ’Ñ…Ñ–Ğ´Ğ½Ñ– Ğ´Ğ°Ğ½Ñ–
â”œâ”€â”€ models/                    # ĞœĞ¾Ğ´ĞµĞ»Ñ– Ğ´Ğ°Ğ½Ğ¸Ñ…
â”‚   â”œâ”€â”€ element.py            # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸ Ğ¼ĞµÑ€ĞµĞ¶Ñ–
â”‚   â””â”€â”€ network.py            # Ğ›Ğ¾Ğ³Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ° Ğ¼ĞµÑ€ĞµĞ¶Ğ°
â”œâ”€â”€ services/                  # Ğ¡ĞµÑ€Ğ²Ñ–ÑĞ¸ Ñ‚Ğ° ÑƒÑ‚Ğ¸Ğ»Ñ–Ñ‚Ğ¸
â”‚   â”œâ”€â”€ data_loader.py        # Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…
â”‚   â”œâ”€â”€ distance.py           # ĞĞ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ´ÑÑ‚Ğ°Ğ½ĞµĞ¹
â”‚   â”œâ”€â”€ cost_calculator.py    # Ğ Ğ¾Ğ·Ñ€Ğ°Ñ…ÑƒĞ½Ğ¾Ğº Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚
â”‚   â””â”€â”€ visualization.py      # Ğ’Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
â”œâ”€â”€ optimizers/                # ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—
â”‚   â”œâ”€â”€ base.py               # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ»Ğ°Ñ
â”‚   â””â”€â”€ coordinate.py         # ĞœĞŸĞ
â”œâ”€â”€ results/                   # Ğ—Ğ³ĞµĞ½ĞµÑ€Ğ¾Ğ²Ğ°Ğ½Ñ– Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸
â””â”€â”€ main.py                   # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ñƒ
```

### ĞŸĞ°Ñ‚ĞµÑ€Ğ½Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ

1. **Strategy Pattern** - Ñ€Ñ–Ğ·Ğ½Ñ– Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— (ĞœĞŸĞ, Ğ³ĞµĞ½ĞµÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹)
2. **Template Method** - Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ»Ğ°Ñ `Optimizer` Ğ· Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ğ¸Ğ¼ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ¼ `optimize()`
3. **Facade** - ĞºĞ»Ğ°Ñ `LogisticsNetwork` ÑĞ¿Ñ€Ğ¾Ñ‰ÑƒÑ” Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñƒ Ğ· Ğ¼ĞµÑ€ĞµĞ¶ĞµÑ
4. **Builder** - Ğ¿Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ²Ğµ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¼ĞµÑ€ĞµĞ¶Ñ– Ñ‡ĞµÑ€ĞµĞ· `data_loader`

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ»Ğ°ÑÑ–Ğ²

### 1. ĞœĞ¾Ğ´ĞµĞ»Ñ– ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ–Ğ² (`models/element.py`)

#### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ»Ğ°Ñ Element

```python
@dataclass
class Element:
    id: int          # Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ñ–Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ‚Ğ¾Ñ€
    x: float         # X ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°
    y: float         # Y ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°
    type: str        # Ğ¢Ğ¸Ğ¿ ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°
```

**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ»Ğ°Ñ Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ–Ğ² Ğ¼ĞµÑ€ĞµĞ¶Ñ–

#### Center (Ğ Ğ¾Ğ·Ğ¿Ğ¾Ğ´Ñ–Ğ»ÑŒÑ‡Ğ¸Ğ¹ Ñ†ĞµĞ½Ñ‚Ñ€)

```python
class Center(Element):
    def __init__(self, id: int, x: float, y: float)
```

**ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¸:**
- Ğ£ÑĞ¿Ğ°Ğ´ĞºĞ¾Ğ²ÑƒÑ” Ğ²ÑÑ– Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¸ Ğ²Ñ–Ğ´ `Element`
- `type` Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ÑÑ”Ñ‚ÑŒÑÑ ÑĞº `'center'`

**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:** Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ÑĞºĞ»Ğ°Ğ´, Ğ· ÑĞºĞ¾Ğ³Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ”Ñ‚ÑŒÑÑ Ğ´Ğ¾ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²

#### Terminal (ĞŸÑ€Ğ¾Ğ¼Ñ–Ğ¶Ğ½Ğ¸Ğ¹ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»)

```python
class Terminal(Element):
    terminal_cost: float      # Ğ¤Ñ–ĞºÑĞ¾Ğ²Ğ°Ğ½Ğ° Ğ²Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ ÑƒÑ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ
    processing_cost: float    # Ğ’Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ¸ Ğ¾Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ– Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñƒ
    is_active: bool = True    # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ñ–
```

**ĞœĞµÑ‚Ğ¾Ğ´Ğ¸:**
- `__init__(id, x, y, terminal_cost, processing_cost)` - ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€
- `__repr__()` - ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ· ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼

**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:** ĞŸÑ€Ğ¾Ğ¼Ñ–Ğ¶Ğ½Ğ¸Ğ¹ Ğ¿ÑƒĞ½ĞºÑ‚ Ğ¼Ñ–Ğ¶ Ñ†ĞµĞ½Ñ‚Ñ€Ğ¾Ğ¼ Ñ‚Ğ° ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ğ°Ğ¼Ğ¸. ĞœĞ¾Ğ¶Ğµ Ğ±ÑƒÑ‚Ğ¸ Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ”Ñ.

#### Consumer (Ğ¡Ğ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡)

```python
class Consumer(Element):
    demand: float                    # ĞŸĞ¾Ğ¿Ğ¸Ñ‚ (Ğ¾Ğ±'Ñ”Ğ¼ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ)
    assigned_terminal: Optional[int] # ID Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñƒ
```

**ĞœĞµÑ‚Ğ¾Ğ´Ğ¸:**
- `__init__(id, x, y, demand)` - ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€
- `__repr__()` - ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ

**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:** ĞšÑ–Ğ½Ñ†ĞµĞ²Ğ¸Ğ¹ ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²

---

### 2. Ğ›Ğ¾Ğ³Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ° Ğ¼ĞµÑ€ĞµĞ¶Ğ° (`models/network.py`)

#### ĞšĞ»Ğ°Ñ LogisticsNetwork

```python
class LogisticsNetwork:
    centers: List[Center]
    terminals: List[Terminal]
    consumers: List[Consumer]
    cost_calculator: CostCalculator
```

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¸:**

##### Ğ†Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ

```python
def __init__(self, centers, terminals, consumers, 
             transport_cost_per_unit=1.0)
```

ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ²Ğ¸ĞºĞ»Ğ¸ĞºĞ°Ñ” `_initialize_network()`, ÑĞºĞ°:
- ĞĞºÑ‚Ğ¸Ğ²ÑƒÑ” Ğ²ÑÑ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸
- ĞŸÑ€Ğ¸Ğ²'ÑĞ·ÑƒÑ” ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ² Ğ´Ğ¾ Ğ½Ğ°Ğ¹Ğ±Ğ»Ğ¸Ğ¶Ñ‡Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²

##### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ Ğ¼ĞµÑ€ĞµĞ¶ĞµÑ

```python
def assign_consumers_to_terminals(self)
```
ĞŸĞµÑ€ĞµÑ€Ğ¾Ğ·Ğ¿Ğ¾Ğ´Ñ–Ğ»ÑÑ” Ğ²ÑÑ–Ñ… ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ² Ğ´Ğ¾ Ğ½Ğ°Ğ¹Ğ±Ğ»Ğ¸Ğ¶Ñ‡Ğ¸Ñ… **Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ…** Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ².

```python
def get_terminal_by_id(self, terminal_id: int) -> Terminal
```
Ğ—Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ» Ğ·Ğ° ID. Ğ’Ğ¸ĞºĞ¸Ğ´Ğ°Ñ” `ValueError` ÑĞºÑ‰Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾.

```python
def get_active_terminals(self) -> List[Terminal]
```
ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ².

##### ĞĞ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚

```python
def calculate_costs(self) -> Dict[str, float]
```

ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” ÑĞ»Ğ¾Ğ²Ğ½Ğ¸Ğº:
```python
{
    'fixed_costs': float,                    # Ğ¤Ñ–ĞºÑĞ¾Ğ²Ğ°Ğ½Ñ– Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
    'processing_costs': float,               # Ğ’Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ
    'transport_center_to_terminal': float,   # Ğ¦ĞµĞ½Ñ‚Ñ€ â†’ Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸
    'transport_terminal_to_consumer': float, # Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸ â†’ Ğ¡Ğ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–
    'transport_total': float,                # Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ñ– Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ½Ñ–
    'total_cost': float                      # Ğ—ĞĞ“ĞĞ›Ğ¬ĞĞ† Ğ’Ğ˜Ğ¢Ğ ĞĞ¢Ğ˜
}
```

---

### 3. ĞĞ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ´ÑÑ‚Ğ°Ğ½ĞµĞ¹ (`services/distance.py`)

#### Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—

```python
def euclidean_distance(elem1, elem2) -> float
```
**Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:** `âˆš((x2-x1)Â² + (y2-y1)Â²)`

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸:**
- `elem1, elem2` - ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸ Ñ‚Ğ¸Ğ¿Ñƒ `Element` Ğ°Ğ±Ğ¾ ĞºĞ¾Ñ€Ñ‚ĞµĞ¶Ñ– `(x, y)`

```python
def manhattan_distance(elem1, elem2) -> float
```
**Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:** `|x2-x1| + |y2-y1|`

```python
def find_nearest_terminal(consumer, terminals, 
                         active_only=True) -> tuple
```
**ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ”:** `(terminal, distance)` - Ğ½Ğ°Ğ¹Ğ±Ğ»Ğ¸Ğ¶Ñ‡Ğ¸Ğ¹ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ» Ñ‚Ğ° Ğ²Ñ–Ğ´ÑÑ‚Ğ°Ğ½ÑŒ

**Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ:** O(n), Ğ´Ğµ n - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²

---

### 4. ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ (`services/cost_calculator.py`)

#### ĞšĞ»Ğ°Ñ CostCalculator

```python
class CostCalculator:
    transport_cost_per_unit: float  # Ğ’Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ Ğ·Ğ° Ğ¾Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ Ğ²Ñ–Ğ´ÑÑ‚Ğ°Ğ½Ñ–
```

##### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚

**1. Ğ¤Ñ–ĞºÑĞ¾Ğ²Ğ°Ğ½Ñ– Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²**

```python
def calculate_terminal_fixed_costs(terminals) -> float
```

Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:
```
Î£(terminal_cost) Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
```

**2. Ğ’Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ**

```python
def calculate_processing_costs(terminals, consumers) -> float
```

Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:
```
Î£(processing_cost Ã— demand) Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñƒ
```

**3. Ğ’Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ½Ğ° Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ**

```python
def calculate_transportation_costs(center, terminals, consumers) 
    -> Tuple[float, float, float]
```

Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸:
```
Ğ¦ĞµĞ½Ñ‚Ñ€ â†’ Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»:
  cost = distance(center, terminal) Ã— transport_cost Ã— total_demand

Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ» â†’ Ğ¡Ğ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡:
  cost = distance(terminal, consumer) Ã— transport_cost Ã— demand
```

**ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ”:** `(center_to_terminal, terminal_to_consumer, total)`

---

## ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ»Ğ°Ñ Optimizer (`optimizers/base.py`)

```python
class Optimizer(ABC):
    network: LogisticsNetwork
    initial_cost: float
    final_cost: float
    optimization_history: list
    
    @abstractmethod
    def optimize(self) -> Dict[str, float]:
        pass
```

**ĞœĞµÑ‚Ğ¾Ğ´Ğ¸:**
- `get_improvement()` - Ğ¾Ğ±Ñ‡Ğ¸ÑĞ»ÑÑ” Ğ¿Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ
- `print_results()` - Ğ²Ğ¸Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸

---

### ĞœĞµÑ‚Ğ¾Ğ´ Ğ¿Ğ¾ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿ÑƒÑĞºÑƒ (ĞœĞŸĞ)

**Ğ¤Ğ°Ğ¹Ğ»:** `optimizers/coordinate.py`

**Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ:** ĞšĞ»Ğ°ÑĞ¸Ñ‡Ğ½Ğ° ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ p-median problem Ğ· Ğ¿ĞµÑ€ĞµĞ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹

#### ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼

```python
class CoordinateOptimizer(Optimizer):
    step_size: float        # ĞĞµ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ (Ğ´Ğ»Ñ ÑÑƒĞ¼Ñ–ÑĞ½Ğ¾ÑÑ‚Ñ–)
    max_iterations: int     # ĞœĞ°ĞºÑ. Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ñ–Ğ² (default: 100)
    tolerance: float        # ĞœÑ–Ğ½. Ğ¿Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ Ğ¼Ñ–Ğ¶ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸ (default: 0.01)
```

#### ĞŸÑĞµĞ²Ğ´Ğ¾ĞºĞ¾Ğ´

```
function OPTIMIZE():
    initial_cost = calculate_costs()
    possible_locations = create_location_grid()  // Ğ¡Ñ–Ñ‚ĞºĞ° Ğ· ĞºÑ€Ğ¾ĞºĞ¾Ğ¼ 5

    // Ğ¤Ğ°Ğ·Ğ° 1: ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ğ¹ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
    for pass in 1..max_iterations:
        pass_start_cost = current_cost

        // ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñƒ
        for each active_terminal:
            best_location = current_location
            best_cost = current_cost

            // ĞŸĞµÑ€ĞµĞ±Ñ–Ñ€ Ğ’Ğ¡Ğ†Ğ¥ Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹
            for each location in possible_locations:
                terminal.move_to(location)
                reassign_consumers()
                new_cost = calculate_costs()

                if new_cost < best_cost:
                    best_cost = new_cost
                    best_location = location

            terminal.move_to(best_location)
            current_cost = best_cost

        // ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ·Ğ±Ñ–Ğ¶Ğ½Ğ¾ÑÑ‚Ñ– Ğ¼Ñ–Ğ¶ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸
        if (pass_start_cost - current_cost) < tolerance:
            break

    // Ğ¤Ğ°Ğ·Ğ° 2: ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ´Ğ¾Ñ†Ñ–Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ñ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
    for each active_terminal:
        deactivate(terminal)
        new_cost = calculate_costs()
        if new_cost < current_cost:
            current_cost = new_cost  // Ğ—Ğ°Ğ»Ğ¸ÑˆĞ°Ñ”Ğ¼Ğ¾ Ğ´ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¼
        else:
            activate(terminal)       // ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ”Ğ¼Ğ¾ Ğ½Ğ°Ğ·Ğ°Ğ´

    return results
```

#### Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹

```python
def _get_possible_locations() -> List[Tuple[float, float]]:
    """
    Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ” ÑÑ–Ñ‚ĞºÑƒ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ñ–Ğ¹Ğ½Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹:
    1. Ğ—Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ¼ĞµĞ¶Ñ– Ğ¾Ğ±Ğ»Ğ°ÑÑ‚Ñ– (min/max ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ²)
    2. Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ” Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñƒ ÑÑ–Ñ‚ĞºÑƒ Ğ· ĞºÑ€Ğ¾ĞºĞ¾Ğ¼ 5 Ğ¾Ğ´Ğ¸Ğ½Ğ¸Ñ†ÑŒ
    3. Ğ’Ğ¸ĞºĞ»ÑÑ‡Ğ°Ñ” Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ñ—, Ñ‰Ğ¾ ÑĞ¿Ñ–Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‚ÑŒ Ğ·Ñ– ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ğ°Ğ¼Ğ¸ (epsilon < 0.1)
    4. Ğ”Ğ¾Ğ´Ğ°Ñ” Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ Ñ†ĞµĞ½Ñ‚Ñ€Ñƒ

    Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ğ½Ğ°Ğ±Ñ–Ñ€ Ğ´Ğ¸ÑĞºÑ€ĞµÑ‚Ğ½Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹ Ğ´Ğ»Ñ Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
    """
```

**Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ:** O(L Ã— C Ã— N Ã— P), Ğ´Ğµ:
- L - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹ (~400 Ğ´Ğ»Ñ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚Ñ– 100Ã—100)
- C - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ²
- N - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²
- P - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ñ–Ğ² (Ğ·Ğ°Ğ·Ğ²Ğ¸Ñ‡Ğ°Ğ¹ 2-5)

#### Ğ’Ğ¸Ğ¼Ğ¸ĞºĞ°Ğ½Ğ½Ñ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²

```python
def _try_deactivate_terminals(current_cost, verbose) -> bool:
    """
    1. Ğ”Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñƒ:
       - Ğ¢Ğ¸Ğ¼Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾ Ğ²Ğ¸Ğ¼Ğ¸ĞºĞ°Ñ”
       - ĞŸĞµÑ€ĞµÑ€Ğ¾Ğ·Ğ¿Ğ¾Ğ´Ñ–Ğ»ÑÑ” ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ²
       - ĞĞ±Ñ‡Ğ¸ÑĞ»ÑÑ” Ğ½Ğ¾Ğ²Ñ– Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸
       - Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ¼ĞµĞ½ÑˆÑ– â†’ Ğ·Ğ°Ğ»Ğ¸ÑˆĞ°Ñ” Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ¸Ğ¼
       - Ğ†Ğ½Ğ°ĞºÑˆĞµ â†’ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” Ğ½Ğ°Ğ·Ğ°Ğ´
    2. ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” True ÑĞºÑ‰Ğ¾ Ñ…Ğ¾Ñ‡Ğ° Ğ± 1 Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ» Ğ²Ğ¸Ğ¼ĞºĞ½ĞµĞ½Ğ¾
    """
```

**ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ğ¾Ğº:**
- `ValueError` ÑĞºÑ‰Ğ¾ Ğ½ĞµĞ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ (Ğ½ĞµĞ¼Ğ°Ñ” Ñ–Ğ½ÑˆĞ¸Ñ… Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ» Ğ½Ğ°Ğ·Ğ°Ğ´

---

### Ğ¦Ñ–Ğ»ÑŒĞ¾Ğ²Ğ° Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ

**Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ° Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:**

```
F(x) = Î£(fixed_costs) + Î£(processing_costs) + Î£(transport_costs)

Ğ´Ğµ:
  fixed_costs = Î£(terminal_cost_i) Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ² i

  processing_costs = Î£(processing_cost_i Ã— demand_i) Ğ´Ğ»Ñ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ² i

  transport_costs =
    Î£(dist(center, terminal_i) Ã— transport_cost Ã— demand_i Ã— 0.1) +
    Î£(dist(terminal_i, consumer_j) Ã— transport_cost Ã— demand_j)
```

**ĞšĞ¾ĞµÑ„Ñ–Ñ†Ñ–Ñ”Ğ½Ñ‚ 0.1 Ğ´Ğ»Ñ Ñ†ĞµĞ½Ñ‚Ñ€â†’Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸:**
- Ğ›Ğ¾Ğ³Ñ–ĞºĞ°: Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚ Ğ¾Ğ¿Ñ‚Ğ¾Ğ¼ Ğ²Ñ–Ğ´ Ñ†ĞµĞ½Ñ‚Ñ€Ñƒ Ğ´ĞµÑˆĞµĞ²ÑˆĞ¸Ğ¹ Ğ½Ñ–Ğ¶ Ñ€Ğ¾Ğ·Ğ´Ñ€Ñ–Ğ±Ğ½Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°
- Ğ’ĞµĞ»Ğ¸ĞºÑ– Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ñ–Ğ²ĞºĞ¸ Ñ†ĞµĞ½Ñ‚Ñ€â†’Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸ vs Ğ¼Ğ°Ğ»Ñ– Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¸ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸â†’ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–
- Ğ‘ĞµĞ· Ñ†ÑŒĞ¾Ğ³Ğ¾ ĞºĞ¾ĞµÑ„Ñ–Ñ†Ñ–Ñ”Ğ½Ñ‚Ğ° Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ‰ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ²ÑÑ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€Ñ–

**ĞœĞµÑ‚Ğ°:** ĞœÑ–Ğ½Ñ–Ğ¼Ñ–Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ F(x)

---

## Ğ’Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ

### ĞšĞ»Ğ°Ñ NetworkVisualizer (`services/visualization.py`)

```python
class NetworkVisualizer:
    figsize: tuple         # Ğ Ğ¾Ğ·Ğ¼Ñ–Ñ€ Ğ³Ñ€Ğ°Ñ„Ñ–ĞºĞ°
    colors: dict          # ĞšĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ğ° ÑÑ…ĞµĞ¼Ğ°
```

#### ĞšĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ğ° ÑÑ…ĞµĞ¼Ğ°

```python
colors = {
    'center': '#FF6B6B',              # Ğ§ĞµÑ€Ğ²Ğ¾Ğ½Ğ¸Ğ¹ (Ñ†ĞµĞ½Ñ‚Ñ€)
    'terminal_active': '#4ECDC4',     # Ğ‘Ñ–Ñ€ÑĞ·Ğ¾Ğ²Ğ¸Ğ¹ (Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹)
    'terminal_inactive': '#95A5A6',   # Ğ¡Ñ–Ñ€Ğ¸Ğ¹ (Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹)
    'consumer': '#45B7D1',            # Ğ¡Ğ¸Ğ½Ñ–Ğ¹ (ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡)
    'connection': '#BDC3C7',          # Ğ¡Ñ–Ñ€Ğ¸Ğ¹ (Ğ·'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ)
}
```

#### ĞœĞµÑ‚Ğ¾Ğ´Ğ¸

##### ĞœĞ°Ğ»ÑĞ²Ğ°Ğ½Ğ½Ñ Ğ¼ĞµÑ€ĞµĞ¶Ñ–

```python
def plot_network(network, title, show_connections=True, ax=None)
```

**Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸ Ğ²Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—:**
1. Ğ¦ĞµĞ½Ñ‚Ñ€ - Ñ‡ĞµÑ€Ğ²Ğ¾Ğ½Ğ¸Ğ¹ ĞºĞ²Ğ°Ğ´Ñ€Ğ°Ñ‚ (500pt, alpha=1.0)
2. ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸ - Ğ±Ñ–Ñ€ÑĞ·Ğ¾Ğ²Ñ– Ñ‚Ñ€Ğ¸ĞºÑƒÑ‚Ğ½Ğ¸ĞºĞ¸ (300pt, alpha=1.0) Ğ· Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞ°Ğ¼Ğ¸
3. ĞĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸ - ÑÑ–Ñ€Ñ– Ñ…Ñ€ĞµÑÑ‚Ğ¸ĞºĞ¸ (150pt, alpha=0.4) **Ğ±ĞµĞ· Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑÑ–Ğ²**
4. Ğ¡Ğ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ– - ÑĞ¸Ğ½Ñ– ĞºÑ€ÑƒĞ¶ĞºĞ¸ (100pt, alpha=0.8)
5. Ğ—'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ - ÑÑ–Ñ€Ñ– Ğ»Ñ–Ğ½Ñ–Ñ— (alpha=0.3)

**ĞŸĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñ–Ğ²:**
- ĞœĞµĞ½ÑˆĞ¸Ğ¹ Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ€: 300pt â†’ 150pt (Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞºÑ€Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–Ğ²)
- ĞĞ°Ğ¿Ñ–Ğ²Ğ¿Ñ€Ğ¾Ğ·Ğ¾Ñ€Ñ–: alpha=0.4 (Ğ¼ĞµĞ½Ñˆ Ğ¿Ğ¾Ğ¼Ñ–Ñ‚Ğ½Ñ–)
- Ğ‘ĞµĞ· Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑÑ–Ğ²: Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ ÑÑ–Ñ€Ğ¸Ğ¹ Ñ…Ñ€ĞµÑÑ‚Ğ¸Ğº (ÑƒĞ½Ğ¸ĞºĞ°Ñ” Ğ¿Ğ»ÑƒÑ‚Ğ°Ğ½Ğ¸Ğ½Ğ¸)
- ĞĞ¸Ğ¶Ñ‡Ğ¸Ğ¹ ÑˆĞ°Ñ€: zorder=2 (Ğ¿Ñ–Ğ´ ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ğ°Ğ¼Ğ¸)

**Z-order ÑˆĞ°Ñ€Ğ¸:**
- 5: Ğ¦ĞµĞ½Ñ‚Ñ€ (Ğ½Ğ°Ğ¹Ğ²Ğ¸Ñ‰Ğµ)
- 4: ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸
- 3: Ğ¡Ğ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–
- 2: ĞĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ– Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸
- 1: Ğ—'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ (Ğ½Ğ°Ğ¹Ğ½Ğ¸Ğ¶Ñ‡Ğµ)

##### ĞŸĞ¾Ñ€Ñ–Ğ²Ğ½ÑĞ½Ğ½Ñ Ğ¼ĞµÑ€ĞµĞ¶

```python
def compare_networks(network_before, network_after, 
                    costs_before, costs_after, save_path)
```

Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ” Ğ³Ñ€Ğ°Ñ„Ñ–Ğº 2Ã—1:
- Ğ›Ñ–Ğ²Ğ° Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ: Ğ´Ğ¾ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—
- ĞŸÑ€Ğ°Ğ²Ğ° Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ: Ğ¿Ñ–ÑĞ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ” Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ñ–Ñ `results/`
- Ğ—Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ” Ğ· DPI=300

##### ĞŸĞ¾Ñ€Ñ–Ğ²Ğ½ÑĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚

```python
def plot_cost_comparison(costs_before, costs_after, save_path)
```

Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ” 2 Ğ³Ñ€Ğ°Ñ„Ñ–ĞºĞ¸:
1. **Ğ¡Ñ‚Ğ¾Ğ²Ğ¿Ñ‡Ğ¸ĞºĞ¾Ğ²Ğ° Ğ´Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ°** - Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–ÑÑ…
2. **Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ñ– Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸** - Ğ´Ğ¾/Ğ¿Ñ–ÑĞ»Ñ Ğ·Ñ– ÑÑ‚Ñ€Ñ–Ğ»ĞºĞ¾Ñ ĞµĞºĞ¾Ğ½Ğ¾Ğ¼Ñ–Ñ—

---

## Ğ†Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼

### Ğ’Ğ¸Ğ±Ñ–Ñ€ Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ² Ğ´Ğ°Ğ½Ğ¸Ñ… (main.py)

ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ° Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ” Ñ–Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ±Ñ–Ñ€ CSV Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ² Ğ· Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ñ–Ñ— `data/`.

#### Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—

```python
def get_csv_files(data_dir: str = 'data') -> list
```
**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:** Ğ¡ĞºĞ°Ğ½ÑƒÑ” Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ñ–Ñ Ñ‚Ğ° Ğ¿Ğ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” ÑĞ¿Ğ¸ÑĞ¾Ğº CSV Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²

```python
def display_file_menu(csv_files: list) -> int
```
**ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:**
- Ğ’Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°Ñ” Ğ¿Ñ€Ğ¾Ğ½ÑƒĞ¼ĞµÑ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²
- ĞŸÑ€Ğ¸Ğ¹Ğ¼Ğ°Ñ” Ğ²Ğ¸Ğ±Ñ–Ñ€ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° (1-N)
- ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” Ñ–Ğ½Ğ´ĞµĞºÑ Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñƒ Ğ°Ğ±Ğ¾ -1 Ğ´Ğ»Ñ Ğ²Ğ¸Ñ…Ğ¾Ğ´Ñƒ

#### Ğ Ğ¾Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑ

```
1. get_csv_files('data/') â†’ ÑĞ¿Ğ¸ÑĞ¾Ğº CSV
2. display_file_menu(csv_files) â†’ Ğ²Ğ¸Ğ±Ñ–Ñ€ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°
3. selected_file = csv_files[selected_idx]
4. file_basename = selected_file.stem
5. ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ...
6. Ğ—Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ–Ğ²: results/{file_basename}_*.png
```

**ĞŸĞµÑ€ĞµĞ²Ğ°Ğ³Ğ¸:**
- Ğ—Ñ€ÑƒÑ‡Ğ½Ğ° Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· ĞºÑ–Ğ»ÑŒĞºĞ¾Ğ¼Ğ° Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¸Ğ¼Ğ¸ Ğ¼ĞµÑ€ĞµĞ¶Ğ°Ğ¼Ğ¸
- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¸ Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ Ğ· ÑƒĞ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¼Ğ¸ Ñ–Ğ¼ĞµĞ½Ğ°Ğ¼Ğ¸
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ–Ğ²Ğ½ÑĞ½Ğ½Ñ Ñ€Ñ–Ğ·Ğ½Ğ¸Ñ… ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ğ¹

---

## Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ…

### data_loader.py

#### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ CSV

```csv
id,x,y,type,demand,terminal_cost,processing_cost
```

**ĞšĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸:**
- `id` (int) - ÑƒĞ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ñ–Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ‚Ğ¾Ñ€
- `x, y` (float) - ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¸
- `type` (str) - Ñ‚Ğ¸Ğ¿: 'center', 'terminal', 'consumer'
- `demand` (float) - Ğ¿Ğ¾Ğ¿Ğ¸Ñ‚ (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ´Ğ»Ñ consumer)
- `terminal_cost` (float) - Ñ„Ñ–ĞºÑĞ¾Ğ²Ğ°Ğ½Ğ° Ğ²Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ´Ğ»Ñ terminal)
- `processing_cost` (float) - Ğ²Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ¸ (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ´Ğ»Ñ terminal)

#### Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—

```python
def load_network_from_csv(file_path) -> Tuple[List[Center], 
                                              List[Terminal], 
                                              List[Consumer]]
```

**ĞŸÑ€Ğ¾Ñ†ĞµÑ:**
1. Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°Ñ” CSV Ğ· ĞºĞ¾Ğ´ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼ UTF-8
2. Ğ§Ğ¸Ñ‚Ğ°Ñ” Ñ€ÑĞ´ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· `csv.DictReader`
3. Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ” Ğ¾Ğ±'Ñ”ĞºÑ‚Ğ¸ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ
4. ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” 3 ÑĞ¿Ğ¸ÑĞºĞ¸

```python
def validate_network_data(centers, terminals, consumers) -> bool
```

**ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ¸:**
- Ğ¥Ğ¾Ñ‡Ğ° Ğ± 1 Ñ†ĞµĞ½Ñ‚Ñ€
- Ğ¥Ğ¾Ñ‡Ğ° Ğ± 1 Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»
- Ğ¥Ğ¾Ñ‡Ğ° Ğ± 1 ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡
- Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ ID
- ĞŸĞ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ– Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ Ğ²Ğ¸Ñ‚Ñ€Ğ°Ñ‚ Ñ– Ğ¿Ğ¾Ğ¿Ğ¸Ñ‚Ñƒ

**Ğ’Ğ¸ĞºĞ¸Ğ´Ğ°Ñ” `ValueError`** Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ°Ñ…

---

## Ğ Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸

### Ğ”Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ°

1. **Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ñ–Ñ‚ÑŒ ĞºĞ»Ğ°Ñ ÑƒÑĞ¿Ğ°Ğ´ĞºÑƒĞ²Ğ°Ğ²ÑˆĞ¸ Ğ²Ñ–Ğ´ `Optimizer`:**

```python
from optimizers.base import Optimizer

class GeneticOptimizer(Optimizer):
    def __init__(self, network, population_size=50, generations=100):
        super().__init__(network)
        self.population_size = population_size
        self.generations = generations
    
    def optimize(self) -> Dict[str, float]:
        # Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ³ĞµĞ½ĞµÑ‚Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñƒ
        self.initial_cost = self.network.calculate_costs()['total_cost']
        
        # ... Ğ²Ğ°Ñˆ ĞºĞ¾Ğ´ ...
        
        self.final_cost = ...
        return self.get_improvement()
```

2. **Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ:**

```python
from optimizers.genetic import GeneticOptimizer

optimizer = GeneticOptimizer(network, population_size=100)
results = optimizer.optimize()
optimizer.print_results()
```

### Ğ”Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ… Ğ¾Ğ±Ğ¼ĞµĞ¶ĞµĞ½ÑŒ

**ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: ĞºĞ°Ğ¿Ğ°Ñ†Ğ¸Ñ‚ĞµÑ‚ Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ñƒ**

1. Ğ”Ğ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚ Ğ´Ğ¾ `Terminal`:

```python
class Terminal(Element):
    capacity: float  # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ¾Ğ±'Ñ”Ğ¼
```

2. Ğ”Ğ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºÑƒ Ğ² Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ‚Ğ¾Ñ€:

```python
def _check_capacity_constraint(self, terminal):
    load = self.network.get_terminal_load(terminal.id)
    return load <= terminal.capacity
```

3. Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹Ñ‚Ğµ Ğ² Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—:

```python
if new_cost < best_cost and self._check_capacity_constraint(terminal):
    best_cost = new_cost
```

### Ğ”Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ… Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº

**ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: Ñ‡Ğ°Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸**

1. Ğ”Ğ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ´Ğ¾ `CostCalculator`:

```python
def calculate_delivery_time(self, center, terminals, consumers, 
                           speed=50) -> float:
    """
    speed: ĞºĞ¼/Ğ³Ğ¾Ğ´
    """
    max_time = 0
    for consumer in consumers:
        terminal = get_terminal_by_id(consumer.assigned_terminal)
        distance = euclidean_distance(center, terminal) + \
                   euclidean_distance(terminal, consumer)
        time = distance / speed
        max_time = max(max_time, time)
    return max_time
```

2. Ğ”Ğ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ´Ğ¾ Ñ†Ñ–Ğ»ÑŒĞ¾Ğ²Ğ¾Ñ— Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ—:

```python
total_cost = costs + Î± Ã— delivery_time
```

---

## ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ñ–

### ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ

**ĞœĞŸĞ (Ğ· Ğ¿ĞµÑ€ĞµĞ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹):**
- ĞĞ´Ğ¸Ğ½ Ğ¿Ñ€Ğ¾Ñ…Ñ–Ğ´: O(L Ã— N Ã— C)
- Ğ”Ğµ L - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹, N - Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ğ°Ğ»Ğ¸, C - ÑĞ¿Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ñ‡Ñ–
- Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ°: O(P Ã— L Ã— N Ã— C), P - ĞºÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ñ–Ğ²

### ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ– Ğ¿Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ

1. **ĞšĞµÑˆÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ñ–Ğ´ÑÑ‚Ğ°Ğ½ĞµĞ¹:**

```python
self._distance_cache = {}

def get_distance(self, elem1, elem2):
    key = (elem1.id, elem2.id)
    if key not in self._distance_cache:
        self._distance_cache[key] = euclidean_distance(elem1, elem2)
    return self._distance_cache[key]
```

2. **ĞŸĞ°Ñ€Ğ°Ğ»ĞµĞ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ:**

```python
from multiprocessing import Pool

def optimize_terminals_parallel(self):
    with Pool() as pool:
        results = pool.map(self._optimize_terminal_position, 
                          self.network.get_active_terminals())
```

3. **Numpy Ğ´Ğ»Ñ Ğ¼Ğ°ÑĞ¾Ğ²Ğ¸Ñ… Ğ¾Ğ±Ñ‡Ğ¸ÑĞ»ĞµĞ½ÑŒ:**

```python
import numpy as np

def calculate_all_distances(self, terminals, consumers):
    t_coords = np.array([[t.x, t.y] for t in terminals])
    c_coords = np.array([[c.x, c.y] for c in consumers])
    # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ– Ğ¾Ğ±Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ
    distances = np.linalg.norm(t_coords[:, None] - c_coords, axis=2)
    return distances
```

---

## Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ

### Unit Ñ‚ĞµÑÑ‚Ğ¸

```python
import unittest
from models.element import Terminal, Consumer
from services.distance import euclidean_distance

class TestDistance(unittest.TestCase):
    def test_euclidean_distance(self):
        elem1 = Terminal(1, 0, 0, 100, 10)
        elem2 = Consumer(2, 3, 4, 50)
        self.assertAlmostEqual(euclidean_distance(elem1, elem2), 5.0)
```

### Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ğ¹Ğ½Ñ– Ñ‚ĞµÑÑ‚Ğ¸

```python
class TestOptimization(unittest.TestCase):
    def test_mpo_reduces_cost(self):
        network = load_test_network()
        initial_cost = network.calculate_costs()['total_cost']
        
        optimizer = CoordinateOptimizer(network)
        optimizer.optimize(verbose=False)
        
        final_cost = network.calculate_costs()['total_cost']
        self.assertLess(final_cost, initial_cost)
```

---

## Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ

### Ğ”Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ğ»Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('optimization.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

# Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
logger.info(f"Iteration {iteration}: cost improved by {improvement}%")
logger.warning(f"Terminal {terminal.id} has no consumers")
logger.error(f"Failed to optimize: {error}")
```

---

## ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ

### config.py

```python
class Config:
    # ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
    STEP_SIZE = 2.0
    MAX_ITERATIONS = 50
    TOLERANCE = 0.1
    
    # Ğ’Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸
    TRANSPORT_COST_PER_UNIT = 1.0
    
    # Ğ’Ñ–Ğ·ÑƒĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ
    FIGURE_SIZE = (12, 8)
    DPI = 300
    
    # Ğ¨Ğ»ÑÑ…Ğ¸
    DATA_PATH = 'data/network_data.csv'
    RESULTS_PATH = 'results/'
```

---

## API Ğ´Ğ»Ñ Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ

### Ğ†Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¸

```python
from abc import ABC, abstractmethod

class OptimizationStrategy(ABC):
    @abstractmethod
    def optimize(self, network: LogisticsNetwork) -> float:
        pass

class CostFunction(ABC):
    @abstractmethod
    def calculate(self, network: LogisticsNetwork) -> float:
        pass

class Visualizer(ABC):
    @abstractmethod
    def plot(self, network: LogisticsNetwork):
        pass
```

---

## Ğ”Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¸

### Ğ”Ñ–Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ° ĞºĞ»Ğ°ÑÑ–Ğ² (ÑĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Element   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚        â”‚         â”‚          â”‚
â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”    â”‚
â”‚Centerâ”‚ â”‚Terminalâ”‚ â”‚Consumerâ”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  LogisticsNetwork    â”‚
                    â”‚  - centers           â”‚
                    â”‚  - terminals         â”‚
                    â”‚  - consumers         â”‚
                    â”‚  - cost_calculator   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   CostCalculator   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ‚Ñ–Ğº Ğ´Ğ°Ğ½Ğ¸Ñ…

```
CSV Ğ¤Ğ°Ğ¹Ğ»
   â†“
data_loader.load_network_from_csv()
   â†“
Elements (Center, Terminal, Consumer)
   â†“
LogisticsNetwork.__init__()
   â†“
_initialize_network()
   â†“
CoordinateOptimizer.optimize()
   â†“
ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ¼ĞµÑ€ĞµĞ¶Ğ°
   â†“
NetworkVisualizer.compare_networks()
   â†“
Ğ“Ñ€Ğ°Ñ„Ñ–ĞºĞ¸ PNG
```

---

**Ğ’ĞµÑ€ÑÑ–Ñ:** 1.0  
**Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ:** 2025-01-12  
**ĞĞ²Ñ‚Ğ¾Ñ€:** Logistics Optimizer Team
